<%- include('../../partials/header.ejs') %>

<%- include('../../partials/navbar.ejs') %>

        <main>
            <div class="container">

                <h2 class="mt-5">Listagem de categoria</h2>

                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>id</th>
                            <th>titulo</th>
                            <th>Slug</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% categorias.forEach(caregoria=>{ %>
                            <tr>
                                <td>
                                    <%= caregoria.id %>
                                </td>
                                <td>
                                    <%= caregoria.title %>
                                </td>
                                <td>
                                    <%= caregoria.slug %>
                                </td>
                                <td>
                                    <a href="/admin/categories/edit/<%= caregoria.id %>" class="btn btn-warning">Editar</a>
                                    <button id="<%= caregoria.id %>" onclick="confirmarDelecao(event)" class="btn btn-danger">Deletar</button>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>

            </div>
        </main>

<%- include('../../partials/footer.ejs') %>

        <script>
            function confirmarDelecao(event){
                //event.preventDefalut()
                const id = event.target.id
                const decisao = confirm("você quer deletar ?");

                if(decisao){

                    window.location.href = `/admin/categories/delete/${id}`;
                }
            }
        </script>