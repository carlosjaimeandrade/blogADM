<%- include('../../partials/header.ejs') %>

<%- include('../../partials/navbar.ejs') %>

        <main>
            <div class="container">

                <h2 class="mt-5">Listagem de artigos</h2>

                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>id</th>
                            <th>titulo</th>
                            <th>Slug</th>
                            <th>Caregoria</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% articles.forEach(article=>{ %>  
                            <tr>
                                <td><%= article.id%></td>
                                <td><%= article.title%></td>  
                                <td><%= article.slug%></td>  
                                <td><%= article.category.title%></td> 
                                <td>
                                    <a href="/admin/article/edit/<%= article.id %>" class="btn btn-warning">Editar</a>
                                    <button id="<%= article.id %>" onclick="confirmarDelecao(event)" class="btn btn-danger">Deletar</button>
                                </td>
                            </tr>
                        <%}) %> 
 
                    </tbody>
                </table>

            </div>
        </main>

<%- include('../../partials/footer.ejs') %>

        <script>
            function confirmarDelecao(event){
                //event.preventDefalut()
                const id = event.target.id
                const decisao = confirm("você quer deletar ?");

                if(decisao){

                    window.location.href = `/admin/article/delete/${id}`;
                }
            }
        </script>